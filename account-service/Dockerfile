FROM openjdk:25-oraclelinux9

WORKDIR /app
COPY target/*.jar /app/account-service.jar

# Define build-time variables
ARG SPRING_DATA_URL
ARG SPRING_DATA_USER_NAME
ARG SPRING_DATA_PASSWORD
ARG RESOURCESERVER_JWT_JWK_SET_URI
ARG EUREKA_SERVER_URL
ARG CORS_ORIGINS
# Set environment variables from the build arguments
ENV SPRING_DATA_URL=$SPRING_DATA_URL
ENV SPRING_DATA_USER_NAME=$SPRING_DATA_USER_NAME
ENV SPRING_DATA_PASSWORD=$SPRING_DATA_PASSWORD
ENV RESOURCESERVER_JWT_JWK_SET_URI=$RESOURCESERVER_JWT_JWK_SET_URI
ENV EUREKA_SERVER_URL=$EUREKA_SERVER_URL
ENV CORS_ORIGINS=$CORS_ORIGINS
# Command to run the application
ENTRYPOINT ["java", "-jar", "account-service.jar"]
