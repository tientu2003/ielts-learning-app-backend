FROM openjdk:25-oraclelinux9

WORKDIR /app
COPY target/*.jar /app/listening-service.jar

# Define build-time variables
ARG SPRING_DATA_MONGODB_URI
ARG SPRING_DATA_MONGODB_LISTENING_DATABASE
ARG RESOURCESERVER_JWT_JWK_SET_URI
ARG EUREKA_SERVER_URL
ARG CORS_ORIGINS
# Set environment variables from the build arguments
ENV SPRING_DATA_MONGODB_URI=$SPRING_DATA_MONGODB_URI
ENV SPRING_DATA_MONGODB_LISTENING_DATABASE=$SPRING_DATA_MONGODB_LISTENING_DATABASE
ENV RESOURCESERVER_JWT_JWK_SET_URI=$RESOURCESERVER_JWT_JWK_SET_URI
ENV EUREKA_SERVER_URL=$EUREKA_SERVER_URL
ENV CORS_ORIGINS=$CORS_ORIGINS
# Command to run the application
ENTRYPOINT ["java", "-jar", "listening-service.jar"]
