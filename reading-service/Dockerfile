FROM openjdk:25-oraclelinux9

WORKDIR /app
COPY target/*.jar /app/reading-service.jar

# Define build-time variables
ARG SPRING_DATA_MONGODB_URI
ARG SPRING_DATA_MONGODB_READING_DATABASE
ARG RESOURCESERVER_JWT_JWK_SET_URI
ARG EUREKA_SERVER_URL
ARG CORS_ORIGINS
ARG TOGETHER_API
# Set environment variables from the build arguments
ENV SPRING_DATA_MONGODB_URI=$SPRING_DATA_MONGODB_URI
ENV SPRING_DATA_MONGODB_READING_DATABASE=$SPRING_DATA_MONGODB_READING_DATABASE
ENV RESOURCESERVER_JWT_JWK_SET_URI=$RESOURCESERVER_JWT_JWK_SET_URI
ENV EUREKA_SERVER_URL=$EUREKA_SERVER_URL
ENV CORS_ORIGINS=$CORS_ORIGINS
ENV TOGETHER_API=$TOGETHER_API
# Command to run the application
ENTRYPOINT ["java", "-jar", "reading-service.jar"]
